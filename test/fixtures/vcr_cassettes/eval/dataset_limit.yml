---
http_interactions:
- request:
    method: post
    uri: https://www.braintrust.dev/api/apikey/login
    body:
      encoding: UTF-8
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - www.braintrust.dev
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Allow-Headers:
      - X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5,
        Content-Type, Date, X-Api-Version
      Access-Control-Allow-Methods:
      - GET,OPTIONS,PATCH,DELETE,POST,PUT
      Access-Control-Allow-Origin:
      - "*"
      Cache-Control:
      - public, max-age=0, must-revalidate
      Content-Length:
      - '395'
      Content-Security-Policy:
      - 'script-src ''self'' ''unsafe-eval'' ''wasm-unsafe-eval'' ''strict-dynamic''
        ''nonce-ZGRhODk2MjctNzIxMC00NjE4LTlmYzItMTIxMjUwMTE2YTRl''  *.js.stripe.com
        js.stripe.com maps.googleapis.com ; style-src ''self'' ''unsafe-inline'' *.braintrust.dev
        btcm6qilbbhv4yi1.public.blob.vercel-storage.com fonts.googleapis.com www.gstatic.com
        d4tuoctqmanu0.cloudfront.net; font-src ''self'' data: fonts.gstatic.com btcm6qilbbhv4yi1.public.blob.vercel-storage.com
        cdn.jsdelivr.net d4tuoctqmanu0.cloudfront.net fonts.googleapis.com mintlify-assets.b-cdn.net
        fonts.cdnfonts.com; object-src ''none''; base-uri ''self''; form-action ''self'';
        frame-ancestors ''self''; worker-src ''self'' blob:; report-uri https://o4507221741076480.ingest.us.sentry.io/api/4507221754380288/security/?sentry_key=27fa5ac907cf7c6ce4a1ab2a03f805b4&sentry_environment=production&sentry_release=16;
        report-to csp-endpoint-0'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 11 Dec 2025 19:09:19 GMT
      Etag:
      - '"12n7ok4b5phaz"'
      Reporting-Endpoints:
      - csp-endpoint-0="https://o4507221741076480.ingest.us.sentry.io/api/4507221754380288/security/?sentry_key=27fa5ac907cf7c6ce4a1ab2a03f805b4&sentry_environment=production&sentry_release=16"
      Server:
      - Vercel
      Strict-Transport-Security:
      - max-age=63072000
      X-Clerk-Auth-Message:
      - Invalid JWT form. A JWT consists of three parts separated by dots. (reason=token-invalid,
        token-carrier=header)
      X-Clerk-Auth-Reason:
      - token-invalid
      X-Clerk-Auth-Status:
      - signed-out
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Matched-Path:
      - "/api/apikey/login"
      X-Nonce:
      - ZGRhODk2MjctNzIxMC00NjE4LTlmYzItMTIxMjUwMTE2YTRl
      X-Vercel-Cache:
      - MISS
      X-Vercel-Id:
      - iad1::iad1::8vb6j-1765480159423-1516270052f1
    body:
      encoding: UTF-8
      string: '{"org_info":[{"id":"5d7c97d7-fef1-4cb7-bda6-7e3756a0ca8e","name":"braintrustdata.com","api_url":"https://staging-api.braintrust.dev","git_metadata":{"fields":["commit","branch","tag","author_name","author_email","commit_message","commit_time","dirty"],"collect":"some"},"is_universal_api":true,"proxy_url":"https://staging-api.braintrust.dev","realtime_url":"wss://realtime.braintrustapi.com"}]}'
  recorded_at: Thu, 11 Dec 2025 19:09:19 GMT
- request:
    method: post
    uri: https://www.braintrust.dev/api/dataset/register
    body:
      encoding: UTF-8
      string: '{"dataset_name":"test-ruby-sdk-dataset-limit","org_id":"5d7c97d7-fef1-4cb7-bda6-7e3756a0ca8e","project_name":"ruby-sdk-test"}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - www.braintrust.dev
      Content-Type:
      - application/json
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - public, max-age=0, must-revalidate
      Content-Length:
      - '554'
      Content-Security-Policy:
      - 'script-src ''self'' ''unsafe-eval'' ''wasm-unsafe-eval'' ''strict-dynamic''
        ''nonce-ZDdjMDIyYjUtZTFmNS00Y2Y0LTk5MzktNTczNDY4YTY4Zjlk''  *.js.stripe.com
        js.stripe.com maps.googleapis.com ; style-src ''self'' ''unsafe-inline'' *.braintrust.dev
        btcm6qilbbhv4yi1.public.blob.vercel-storage.com fonts.googleapis.com www.gstatic.com
        d4tuoctqmanu0.cloudfront.net; font-src ''self'' data: fonts.gstatic.com btcm6qilbbhv4yi1.public.blob.vercel-storage.com
        cdn.jsdelivr.net d4tuoctqmanu0.cloudfront.net fonts.googleapis.com mintlify-assets.b-cdn.net
        fonts.cdnfonts.com; object-src ''none''; base-uri ''self''; form-action ''self'';
        frame-ancestors ''self''; worker-src ''self'' blob:; report-uri https://o4507221741076480.ingest.us.sentry.io/api/4507221754380288/security/?sentry_key=27fa5ac907cf7c6ce4a1ab2a03f805b4&sentry_environment=production&sentry_release=16;
        report-to csp-endpoint-0'
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Thu, 11 Dec 2025 19:09:19 GMT
      Etag:
      - '"10a7g5jf8uife"'
      Reporting-Endpoints:
      - csp-endpoint-0="https://o4507221741076480.ingest.us.sentry.io/api/4507221754380288/security/?sentry_key=27fa5ac907cf7c6ce4a1ab2a03f805b4&sentry_environment=production&sentry_release=16"
      Server:
      - Vercel
      Strict-Transport-Security:
      - max-age=63072000
      X-Clerk-Auth-Message:
      - Invalid JWT form. A JWT consists of three parts separated by dots. (reason=token-invalid,
        token-carrier=header)
      X-Clerk-Auth-Reason:
      - token-invalid
      X-Clerk-Auth-Status:
      - signed-out
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Matched-Path:
      - "/api/dataset/register"
      X-Nonce:
      - ZDdjMDIyYjUtZTFmNS00Y2Y0LTk5MzktNTczNDY4YTY4Zjlk
      X-Vercel-Cache:
      - MISS
      X-Vercel-Id:
      - iad1::iad1::n9s5l-1765480159870-81e1dc349668
    body:
      encoding: UTF-8
      string: '{"project":{"id":"ac86d18e-af78-4caf-918d-b89ad108ec67","org_id":"5d7c97d7-fef1-4cb7-bda6-7e3756a0ca8e","name":"ruby-sdk-test","created":"2025-10-22T03:32:12.324Z","deleted_at":null,"user_id":"f2ddc4e6-a51a-4a60-9734-9af4ea05c6ef","settings":null},"dataset":{"id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","name":"test-ruby-sdk-dataset-limit","description":null,"created":"2025-12-11T18:38:08.788Z","deleted_at":null,"user_id":"c755328d-f64a-4737-a984-e83c088cd9f7","metadata":null},"found_existing":true}'
  recorded_at: Thu, 11 Dec 2025 19:09:19 GMT
- request:
    method: post
    uri: https://staging-api.braintrust.dev/v1/dataset/f15434ad-cc1a-4ea4-9c8c-e8a32582cb67/insert
    body:
      encoding: UTF-8
      string: '{"events":[{"input":"one","expected":"ONE"},{"input":"two","expected":"TWO"},{"input":"three","expected":"THREE"},{"input":"four","expected":"FOUR"},{"input":"five","expected":"FIVE"}]}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Content-Type:
      - application/json
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '208'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:20 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - bd1c667b-10b8-4009-aca2-e07f7f90e1da
      X-Bt-Internal-Trace-Id:
      - 693b16e00000000011f2f433a94caaa6
      X-Amz-Apigw-Id:
      - VcCDEEC3oAMEn3Q=
      Vary:
      - Origin, Accept-Encoding
      Etag:
      - W/"d0-Wzb4UzA6hjUUi+1cHM1PntwKX0E"
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e0-3c506089000ad3ad23d3a25e;Parent=414b42e662951d42;Sampled=0;Lineage=1:fc3b4ff1:0
      Via:
      - 1.1 08bb3c305487b3a7b5b4360d422af708.cloudfront.net (CloudFront), 1.1 92a8583818732665d61a5f5d4edba97a.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - O208TdvTdDif4kY8jH2GLKcBBGfVYx8d5rQmEVMc3v6xNP8koZTzcw==
    body:
      encoding: ASCII-8BIT
      string: '{"row_ids":["a38ed3e1-c0fe-459a-ab63-4b96ab5d15fe","0ebde395-c4d2-44ca-92fa-e571957ea22b","8dd8f7c5-6926-4867-bbc2-c03579fafb31","fbbbc66d-13a8-4c18-ad3f-13fe95db2ec0","106c4844-4783-49ae-bbee-faaaa06ff803"]}'
  recorded_at: Thu, 11 Dec 2025 19:09:20 GMT
- request:
    method: get
    uri: https://staging-api.braintrust.dev/v1/dataset?dataset_name=test-ruby-sdk-dataset-limit&project_name=ruby-sdk-test
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '287'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:21 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - 04b49db2-8a98-4176-9915-e756c00509cb
      X-Bt-Internal-Trace-Id:
      - 693b16e1000000001022e783d760722e
      X-Amz-Apigw-Id:
      - VcCDWG6VIAMEBXA=
      Vary:
      - Origin, Accept-Encoding
      Etag:
      - W/"11f-1xQSKe+NbQQ3FGn574jf3noysgw"
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e1-68c73f414542468a080da24d;Parent=6160f8c381d81a54;Sampled=0;Lineage=1:fc3b4ff1:0
      Via:
      - 1.1 14c5b6fdfe1b1584391cee9b27bdcf4a.cloudfront.net (CloudFront), 1.1 d0868637a3730c2afc20b3628b047a9a.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - 6SKYvFkB_bnwdg-TRdNvmyfk8X32opNgUvgcrFPTIER1uUHdeV1VIg==
    body:
      encoding: ASCII-8BIT
      string: '{"objects":[{"id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","name":"test-ruby-sdk-dataset-limit","description":null,"created":"2025-12-11T18:38:08.788Z","deleted_at":null,"user_id":"c755328d-f64a-4737-a984-e83c088cd9f7","metadata":null}]}'
  recorded_at: Thu, 11 Dec 2025 19:09:21 GMT
- request:
    method: post
    uri: https://staging-api.braintrust.dev/btql
    body:
      encoding: UTF-8
      string: '{"query":{"from":{"op":"function","name":{"op":"ident","name":["dataset"]},"args":[{"op":"literal","value":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67"}]},"select":[{"op":"star"}],"limit":1000},"fmt":"jsonl"}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Content-Type:
      - application/json
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Content-Length:
      - '11652'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:22 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - b5c0763c-82ee-4481-8a98-c43a087f2a73
      X-Bt-Internal-Trace-Id:
      - 693b16e2000000000844e804ede42693
      X-Amz-Apigw-Id:
      - VcCDZGYRoAMEH9A=
      Vary:
      - Origin
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e2-6692614d70e568592eec5fc7;Parent=0f6a41290960cfaf;Sampled=0;Lineage=1:fc3b4ff1:0
      X-Bt-Cursor:
      - aTsPkftuAAA
      Via:
      - 1.1 04eb98a9e0ea7d312d38391a3e694d2e.cloudfront.net (CloudFront), 1.1 a97e58ffc6f61ef3eab965cbc26fc6f0.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - whNHRM0MlFoDVafekbwgY3KYblrB8imuw9Pc3WudwVeZARESOs68SA==
    body:
      encoding: ASCII-8BIT
      string: |
        {"_pagination_key":"p07582679549860249604","_xact_id":"1000196294760740618","audit_data":[{"_xact_id":"1000196294760740618","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T19:09:20.091Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FIVE","id":"106c4844-4783-49ae-bbee-faaaa06ff803","input":"five","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"e07136b3-eac7-43f7-a4e4-1b37ca6dca10","span_id":"e07136b3-eac7-43f7-a4e4-1b37ca6dca10","tags":null}
        {"_pagination_key":"p07582679549860249603","_xact_id":"1000196294760740618","audit_data":[{"_xact_id":"1000196294760740618","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T19:09:20.091Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FOUR","id":"fbbbc66d-13a8-4c18-ad3f-13fe95db2ec0","input":"four","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"e059b9bd-0cf5-4ceb-92fd-cff82ce34663","span_id":"e059b9bd-0cf5-4ceb-92fd-cff82ce34663","tags":null}
        {"_pagination_key":"p07582679549860249602","_xact_id":"1000196294760740618","audit_data":[{"_xact_id":"1000196294760740618","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T19:09:20.090Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"THREE","id":"8dd8f7c5-6926-4867-bbc2-c03579fafb31","input":"three","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"c82db177-e1fe-4b89-8a11-21df4e896430","span_id":"c82db177-e1fe-4b89-8a11-21df4e896430","tags":null}
        {"_pagination_key":"p07582679549860249601","_xact_id":"1000196294760740618","audit_data":[{"_xact_id":"1000196294760740618","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T19:09:20.090Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"TWO","id":"0ebde395-c4d2-44ca-92fa-e571957ea22b","input":"two","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"55abd2ff-c3c3-4066-a1d3-b2aa6245ad1c","span_id":"55abd2ff-c3c3-4066-a1d3-b2aa6245ad1c","tags":null}
        {"_pagination_key":"p07582679549860249600","_xact_id":"1000196294760740618","audit_data":[{"_xact_id":"1000196294760740618","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T19:09:20.090Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"ONE","id":"a38ed3e1-c0fe-459a-ab63-4b96ab5d15fe","input":"one","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"30f920f8-bef7-4766-8a78-fbece463e7e9","span_id":"30f920f8-bef7-4766-8a78-fbece463e7e9","tags":null}
        {"_pagination_key":"p07582672513725497348","_xact_id":"1000196294653377722","audit_data":[{"_xact_id":"1000196294653377722","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:42:01.267Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FIVE","id":"defb5419-f17d-425f-bbcb-bd0f7c2bbd76","input":"five","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"4315fca6-18df-4bf7-b56b-67684e3f54a6","span_id":"4315fca6-18df-4bf7-b56b-67684e3f54a6","tags":null}
        {"_pagination_key":"p07582672513725497347","_xact_id":"1000196294653377722","audit_data":[{"_xact_id":"1000196294653377722","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:42:01.267Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FOUR","id":"1b3bfe56-4e2d-4843-a4f8-88c5705abf7c","input":"four","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"e121a492-12bf-4c1c-9a3e-45229eaddc5d","span_id":"e121a492-12bf-4c1c-9a3e-45229eaddc5d","tags":null}
        {"_pagination_key":"p07582672513725497346","_xact_id":"1000196294653377722","audit_data":[{"_xact_id":"1000196294653377722","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:42:01.267Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"THREE","id":"edf9962a-59e7-44ae-be3f-de580a76eaa4","input":"three","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"22a1c4a3-7ab5-46d0-969d-455496c6a822","span_id":"22a1c4a3-7ab5-46d0-969d-455496c6a822","tags":null}
        {"_pagination_key":"p07582672513725497345","_xact_id":"1000196294653377722","audit_data":[{"_xact_id":"1000196294653377722","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:42:01.267Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"TWO","id":"5a6fc88d-ca18-4645-ad6c-15764416b050","input":"two","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"e3cdce92-7672-4a41-94a2-1354b2df3fa3","span_id":"e3cdce92-7672-4a41-94a2-1354b2df3fa3","tags":null}
        {"_pagination_key":"p07582672513725497344","_xact_id":"1000196294653377722","audit_data":[{"_xact_id":"1000196294653377722","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:42:01.267Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"ONE","id":"13151f6e-0b8b-4b2e-a2a0-70f4c259e940","input":"one","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"a67d7e80-dd99-4476-bac1-845e778df346","span_id":"a67d7e80-dd99-4476-bac1-845e778df346","tags":null}
        {"_pagination_key":"p07582671952438886404","_xact_id":"1000196294644813168","audit_data":[{"_xact_id":"1000196294644813168","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:39:51.085Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FIVE","id":"09f9320d-c8c8-42ed-af57-c47b3c054713","input":"five","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"11dd5633-17ca-465e-a237-f662a2298f5d","span_id":"11dd5633-17ca-465e-a237-f662a2298f5d","tags":null}
        {"_pagination_key":"p07582671952438886403","_xact_id":"1000196294644813168","audit_data":[{"_xact_id":"1000196294644813168","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:39:51.085Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FOUR","id":"4ab8551e-969a-4c29-bc29-fc5f983d5ad6","input":"four","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"31c1809c-3f0e-459b-97a0-7bd02fa3f797","span_id":"31c1809c-3f0e-459b-97a0-7bd02fa3f797","tags":null}
        {"_pagination_key":"p07582671952438886402","_xact_id":"1000196294644813168","audit_data":[{"_xact_id":"1000196294644813168","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:39:51.085Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"THREE","id":"311d9743-7041-4401-b511-312bbadc4f3a","input":"three","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"3a4f539d-dbea-448f-8b2d-9fafb97ef0b0","span_id":"3a4f539d-dbea-448f-8b2d-9fafb97ef0b0","tags":null}
        {"_pagination_key":"p07582671952438886401","_xact_id":"1000196294644813168","audit_data":[{"_xact_id":"1000196294644813168","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:39:51.085Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"TWO","id":"60fc5781-f5ca-48dc-b4f4-7ca94b18c4d7","input":"two","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"91a241d2-4ba6-4298-8b41-998456e116d0","span_id":"91a241d2-4ba6-4298-8b41-998456e116d0","tags":null}
        {"_pagination_key":"p07582671952438886400","_xact_id":"1000196294644813168","audit_data":[{"_xact_id":"1000196294644813168","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:39:51.085Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"ONE","id":"2e52e855-3f62-4e6d-beae-6208a9a2bfc7","input":"one","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"36468df2-b471-47d0-b793-016f0e0c69d7","span_id":"36468df2-b471-47d0-b793-016f0e0c69d7","tags":null}
        {"_pagination_key":"p07582671517271326724","_xact_id":"1000196294638173038","audit_data":[{"_xact_id":"1000196294638173038","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:38:08.910Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FIVE","id":"474ad4e0-e710-412f-ad1e-40f5a38db2b4","input":"five","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"d0bc3fd6-f054-45b0-9564-139bc4c62713","span_id":"d0bc3fd6-f054-45b0-9564-139bc4c62713","tags":null}
        {"_pagination_key":"p07582671517271326723","_xact_id":"1000196294638173038","audit_data":[{"_xact_id":"1000196294638173038","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:38:08.909Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"FOUR","id":"456c61e4-b56c-4bae-824a-7bddcf82a90b","input":"four","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"456d86ad-c774-491c-aec1-116a54b88ecd","span_id":"456d86ad-c774-491c-aec1-116a54b88ecd","tags":null}
        {"_pagination_key":"p07582671517271326722","_xact_id":"1000196294638173038","audit_data":[{"_xact_id":"1000196294638173038","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:38:08.909Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"THREE","id":"8d9ba888-7a2e-4f5f-a708-416ac2f01a39","input":"three","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"517f8042-73fb-4c30-a5bf-3fb121cc4c53","span_id":"517f8042-73fb-4c30-a5bf-3fb121cc4c53","tags":null}
        {"_pagination_key":"p07582671517271326721","_xact_id":"1000196294638173038","audit_data":[{"_xact_id":"1000196294638173038","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:38:08.909Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"TWO","id":"089408a6-62ba-4a85-a164-a2dcacf0f408","input":"two","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"4b02456a-edfb-4db8-b986-5ddd421cc10e","span_id":"4b02456a-edfb-4db8-b986-5ddd421cc10e","tags":null}
        {"_pagination_key":"p07582671517271326720","_xact_id":"1000196294638173038","audit_data":[{"_xact_id":"1000196294638173038","audit_data":{"action":"upsert"},"metadata":{},"source":"api"}],"comments":null,"created":"2025-12-11T18:38:08.909Z","dataset_id":"f15434ad-cc1a-4ea4-9c8c-e8a32582cb67","expected":"ONE","id":"d303a06e-9365-426f-a9c2-aeb5fa1352e3","input":"one","is_root":true,"metadata":null,"origin":null,"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","root_span_id":"e712cf95-a30d-4e12-ba10-4093c0ae281e","span_id":"e712cf95-a30d-4e12-ba10-4093c0ae281e","tags":null}
  recorded_at: Thu, 11 Dec 2025 19:09:22 GMT
- request:
    method: post
    uri: https://staging-api.braintrust.dev/v1/project
    body:
      encoding: UTF-8
      string: '{"name":"ruby-sdk-test"}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Content-Type:
      - application/json
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '236'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:23 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - 432506fc-77a8-4815-89a8-1900ede60287
      X-Bt-Internal-Trace-Id:
      - 693b16e200000000178dfe3073327e20
      X-Amz-Apigw-Id:
      - VcCDgGwqIAMEZwQ=
      Vary:
      - Origin, Accept-Encoding
      Etag:
      - W/"ec-tjqKTzXkSD9WFkzugu+08z52cpA"
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e2-4b3419e32c6b31365e3b786e;Parent=245e27c410c4215b;Sampled=0;Lineage=1:fc3b4ff1:0
      X-Bt-Found-Existing:
      - 'true'
      Via:
      - 1.1 04eb98a9e0ea7d312d38391a3e694d2e.cloudfront.net (CloudFront), 1.1 c5b4420a76f7dc44d5e569e0747ac050.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - KqOVcGpcn6rKOsTsgYtkGwv1BT12FZUwQsOy_apy8EkbvgU96ltKTQ==
    body:
      encoding: ASCII-8BIT
      string: '{"id":"ac86d18e-af78-4caf-918d-b89ad108ec67","org_id":"5d7c97d7-fef1-4cb7-bda6-7e3756a0ca8e","name":"ruby-sdk-test","created":"2025-10-22T03:32:12.324Z","deleted_at":null,"user_id":"f2ddc4e6-a51a-4a60-9734-9af4ea05c6ef","settings":null}'
  recorded_at: Thu, 11 Dec 2025 19:09:22 GMT
- request:
    method: post
    uri: https://staging-api.braintrust.dev/v1/experiment
    body:
      encoding: UTF-8
      string: '{"project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","name":"test-ruby-sdk-exp-limit","ensure_new":true}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Content-Type:
      - application/json
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '396'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:23 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - ab15c101-a21c-4e1a-8b22-6882fe4cc1f5
      X-Bt-Internal-Trace-Id:
      - 693b16e3000000005aa8b4a801295af5
      X-Amz-Apigw-Id:
      - VcCDjHTqIAMEkvQ=
      Vary:
      - Origin, Accept-Encoding
      Etag:
      - W/"18c-fAXxtX9uvbmz7bEPNnlJg/LsdLo"
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e3-112877112f39d8f24672f039;Parent=24fe02d1457582bd;Sampled=0;Lineage=1:fc3b4ff1:0
      Via:
      - 1.1 04eb98a9e0ea7d312d38391a3e694d2e.cloudfront.net (CloudFront), 1.1 faa1f1cd9e8aec6c42fd30b6d46e49f4.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - X2VCeEjFI0DA9f9VlCmIlYJUR-cN3SDkGzCniN_BiP8eGX8eiapNHw==
    body:
      encoding: ASCII-8BIT
      string: '{"id":"12b5ad76-f00e-4c47-8919-738bfacdff50","project_id":"ac86d18e-af78-4caf-918d-b89ad108ec67","name":"test-ruby-sdk-exp-limit-7b7efb44","description":null,"created":"2025-12-11T19:09:23.184Z","repo_info":null,"commit":null,"base_exp_id":null,"deleted_at":null,"dataset_id":null,"dataset_version":null,"public":false,"user_id":"c755328d-f64a-4737-a984-e83c088cd9f7","metadata":null,"tags":null}'
  recorded_at: Thu, 11 Dec 2025 19:09:23 GMT
- request:
    method: get
    uri: https://staging-api.braintrust.dev/experiment-comparison2?experiment_id=12b5ad76-f00e-4c47-8919-738bfacdff50
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      Host:
      - staging-api.braintrust.dev
      Authorization:
      - Bearer <BRAINTRUST_API_KEY>
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Content-Length:
      - '26'
      Connection:
      - keep-alive
      X-Amz-Cf-Pop:
      - JFK50-P10
      - JFK52-P8
      Date:
      - Thu, 11 Dec 2025 19:09:24 GMT
      Access-Control-Allow-Credentials:
      - 'true'
      X-Amzn-Requestid:
      - 3467c30d-d29d-4bdc-be86-6045cdaa6efd
      X-Bt-Internal-Trace-Id:
      - 693b16e4000000004456ea171262e786
      X-Amz-Apigw-Id:
      - VcCDvECwIAMEaIw=
      Vary:
      - Origin, Accept-Encoding
      Etag:
      - W/"1a-DVqVcAQOxg1HFdcjY89JEuayOGw"
      Access-Control-Expose-Headers:
      - x-bt-cursor,x-bt-found-existing,x-bt-query-plan
      X-Amzn-Trace-Id:
      - Root=1-693b16e4-36ecf52612e5221039ca6dbd;Parent=5aa36bce04c8d5b6;Sampled=0;Lineage=1:fc3b4ff1:0
      Via:
      - 1.1 08bb3c305487b3a7b5b4360d422af708.cloudfront.net (CloudFront), 1.1 9f575b6f0217c33f22e6da5419974422.cloudfront.net
        (CloudFront)
      X-Cache:
      - Miss from cloudfront
      X-Amz-Cf-Id:
      - SPO4et8z-tIaAd765NNroffV0-2hI1GahPY8TUkwHjXxxPFskqMIvQ==
    body:
      encoding: ASCII-8BIT
      string: '{"scores":{},"metrics":{}}'
  recorded_at: Thu, 11 Dec 2025 19:09:24 GMT
recorded_with: VCR 6.3.1
